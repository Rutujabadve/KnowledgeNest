{\rtf1\ansi\ansicpg1252\cocoartf2822
\cocoatextscaling0\cocoaplatform0{\fonttbl\f0\fswiss\fcharset0 Helvetica;}
{\colortbl;\red255\green255\blue255;}
{\*\expandedcolortbl;;}
\margl1440\margr1440\vieww29200\viewh17820\viewkind0
\pard\tx720\tx1440\tx2160\tx2880\tx3600\tx4320\tx5040\tx5760\tx6480\tx7200\tx7920\tx8640\pardirnatural\partightenfactor0

\f0\fs24 \cf0 # \uc0\u55358 \u56800  KnowledgeNest \'97 Step-by-Step MVP Build Plan\
\
This document contains an **atomic, testable task list** to build the MVP for the KnowledgeNest architecture (Flask + React + MySQL + PostgreSQL microservices).  \
Each task focuses on **one concern**, has a **clear start and end**, and can be **tested independently**.  \
Use this with an engineering LLM that completes and tests one task at a time.\
\
---\
\
## \uc0\u55357 \u56770 \u65039  Structure\
\
- **Milestone 0** \'97 Repo & environment setup  \
- **Milestone 1** \'97 Databases  \
- **Milestone 2** \'97 Auth Service  \
- **Milestone 3** \'97 Course Service  \
- **Milestone 4** \'97 Review Service  \
- **Milestone 5** \'97 API Gateway  \
- **Milestone 6** \'97 Frontend  \
- **Milestone 7** \'97 Integration Tests  \
- **Milestone 8** \'97 Dockerization  \
- **Milestone 9** \'97 Messaging  \
- **Milestone 10** \'97 CI/CD  \
- **Milestone 11** \'97 Observability  \
- **Miscellaneous polish tasks**\
\
---\
\
## \uc0\u9881 \u65039  Task Format\
\
Each task includes:\
- **Goal** \'97 success definition  \
- **Start** \'97 prerequisites  \
- **End / Acceptance** \'97 measurable completion  \
- **Files** \'97 what to create/modify  \
- **Test steps** \'97 manual or scriptable checks\
\
---\
\
# \uc0\u55358 \u56809  Milestone 0 \'97 Repository & Environment Setup\
\
### T0.01 \'97 Initialize repo and top-level structure\
**Goal:** Create repository root and top-level directories.\
\
**Start:** Empty workspace  \
**End / Acceptance:** `ls` shows `api_gateway/ services/ frontend/ database/ analytics/ ci_cd/ docs/ README.md`\
\
**Files**\
- `README.md` \'96 add title and short description  \
- `.gitignore` \'96 ignore Python, Node, `.env`, `.venv`, `__pycache__`  \
- Create directories listed above\
\
**Test**\
```bash\
ls\
cat README.md | head -n 3\
T0.02 \'97 Add placeholder Dockerfiles\
Goal: Each component folder has a Dockerfile placeholder.\
\
End / Acceptance: find . -maxdepth 2 -name Dockerfile lists at least:\
api_gateway, auth_service, course_service, review_service, frontend, analytics\
\
Files\
\
bash\
Copy code\
# Dockerfile placeholder\
Test\
\
bash\
Copy code\
find . -maxdepth 2 -name Dockerfile\
head -n 1 api_gateway/Dockerfile\
T0.03 \'97 Add project-level docker-compose.yml (dev)\
Goal: Define service names for all components.\
\
End / Acceptance: docker-compose config runs without error.\
\
Files\
\
ci_cd/docker-compose.yml\
Include stubs for: api_gateway, auth_service, course_service, review_service, frontend, mysql, postgres, rabbitmq\
\
Test\
\
bash\
Copy code\
docker-compose -f ci_cd/docker-compose.yml config\
\uc0\u55358 \u56809  Milestone 1 \'97 Databases\
T1.01 \'97 MySQL init script for Auth\
Goal: Create users table.\
\
Files: database/mysql/init.sql\
\
sql\
Copy code\
CREATE DATABASE knowledge_nest_auth;\
USE knowledge_nest_auth;\
\
CREATE TABLE users (\
  id INT AUTO_INCREMENT PRIMARY KEY,\
  email VARCHAR(255) NOT NULL UNIQUE,\
  password_hash VARCHAR(255) NOT NULL,\
  name VARCHAR(255),\
  created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP\
);\
Test\
\
bash\
Copy code\
grep -i "CREATE TABLE users" database/mysql/init.sql\
T1.02 \'97 Postgres schema for Course, Enrollment, Review\
Goal: Define tables for course management.\
\
Files: database/postgres/schema.sql\
\
sql\
Copy code\
CREATE DATABASE knowledge_nest_courses;\
\
CREATE TABLE courses (\
  id SERIAL PRIMARY KEY,\
  title TEXT NOT NULL,\
  description TEXT,\
  content_url TEXT,\
  created_at TIMESTAMP DEFAULT NOW()\
);\
\
CREATE TABLE enrollments (\
  id SERIAL PRIMARY KEY,\
  user_id INT NOT NULL,\
  course_id INT NOT NULL,\
  enrolled_at TIMESTAMP DEFAULT NOW()\
);\
\
CREATE TABLE reviews (\
  id SERIAL PRIMARY KEY,\
  user_id INT NOT NULL,\
  course_id INT NOT NULL,\
  rating INT CHECK (rating >= 1 AND rating <= 5),\
  comment TEXT,\
  created_at TIMESTAMP DEFAULT NOW()\
);\
Test\
\
bash\
Copy code\
grep -E "CREATE TABLE (courses|enrollments|reviews)" database/postgres/schema.sql\
T1.03 \'97 Add MySQL, Postgres, RabbitMQ services to docker-compose\
Goal: Define database services for local dev.\
\
End / Acceptance:\
docker-compose config runs clean and lists mysql, postgres, rabbitmq.\
\
Test\
\
bash\
Copy code\
docker-compose -f ci_cd/docker-compose.yml config --services\
\uc0\u55358 \u56809  Milestone 2 \'97 Auth Service\
T2.01 \'97 Scaffold Flask app + /health\
Goal: Create minimal Flask app in services/auth_service/app.py.\
\
End / Acceptance:\
GET /health \uc0\u8594  \{"status":"ok"\}\
\
Files\
\
app.py\
\
requirements.txt \uc0\u8594  Flask, PyMySQL, bcrypt, PyJWT, SQLAlchemy\
\
Test\
\
bash\
Copy code\
python services/auth_service/app.py\
curl http://localhost:5001/health\
T2.02 \'97 POST /register (no hashing)\
Goal: Insert user into MySQL.\
\
End / Acceptance:\
curl POST /register \uc0\u8594  201 JSON \{id, email\}\
\
Files\
\
app.py, database.py\
\
Test\
\
bash\
Copy code\
curl -X POST http://localhost:5001/register -H "Content-Type: application/json" \\\
 -d '\{"email":"test@example.com","password":"pass","name":"Test"\}'\
T2.03 \'97 Add password hashing (bcrypt)\
Goal: Store hashed passwords.\
\
End / Acceptance:\
Passwords in DB \uc0\u8800  plaintext.\
\
Test\
\
bash\
Copy code\
mysql -D knowledge_nest_auth -e "SELECT password_hash FROM users;"\
T2.04 \'97 POST /login returns JWT\
Goal: Verify password and return JWT.\
\
End / Acceptance:\
curl /login \uc0\u8594  \{access_token: "<jwt>"\}\
Token decodes with user_id.\
\
Test\
\
bash\
Copy code\
curl -X POST http://localhost:5001/login \\\
 -d '\{"email":"test@example.com","password":"pass"\}'\
T2.05 \'97 GET /users/<id> (JWT protected)\
Goal: Protected route requiring valid JWT.\
\
End / Acceptance:\
Request with JWT \uc0\u8594  200 + JSON user data.\
Without JWT \uc0\u8594  401.\
\
\uc0\u55358 \u56809  Milestone 3 \'97 Course Service\
T3.01 \'97 Scaffold + /health\
Goal: Minimal Flask app for Course service.\
\
End / Acceptance:\
GET /health \uc0\u8594  \{"status":"ok"\}\
\
T3.02 \'97 POST /courses (create)\
Goal: Insert new course in Postgres.\
\
End / Acceptance:\
Returns 201 and DB row exists.\
\
T3.03 \'97 GET /courses (list)\
Goal: Retrieve all courses.\
\
End / Acceptance:\
JSON array with at least one course.\
\
T3.04 \'97 POST /courses/<id>/enroll\
Goal: Create enrollment entry.\
\
End / Acceptance:\
201 Created + row in enrollments.\
\
\uc0\u55358 \u56809  Milestone 4 \'97 Review Service\
T4.01 \'97 Scaffold + /health\
Goal: Minimal Flask app.\
\
End / Acceptance:\
GET /health \uc0\u8594  ok.\
\
T4.02 \'97 POST /courses/<id>/reviews\
Goal: Create review record.\
\
End / Acceptance:\
201 and DB row inserted.\
\
\uc0\u55358 \u56809  Milestone 5 \'97 API Gateway\
T5.01 \'97 Scaffold + /health\
Goal: Gateway running on port 5000.\
\
T5.02 \'97 Proxy GET /api/courses \uc0\u8594  Course service\
Goal: Forward request to Course service.\
\
End / Acceptance:\
Gateway response matches Course service.\
\
T5.03 \'97 Protect routes with JWT\
Goal: Enroll routes require JWT.\
\
End / Acceptance:\
Without token \uc0\u8594  401\
With token \uc0\u8594  201 (success).\
\
\uc0\u55358 \u56809  Milestone 6 \'97 Frontend (React)\
T6.01 \'97 Scaffold React app\
Goal: Create base React app with Home page.\
\
End / Acceptance:\
npm start \uc0\u8594  Home page loads.\
\
T6.02 \'97 Login page + Auth call\
Goal: Submit login form, save token.\
\
End / Acceptance:\
Token stored in localStorage["kn_token"].\
\
T6.03 \'97 Course listing page\
Goal: Fetch /api/courses via gateway.\
\
End / Acceptance:\
Courses displayed in UI.\
\
T6.04 \'97 Enroll button\
Goal: Enroll via gateway using JWT.\
\
End / Acceptance:\
201 on success.\
\
T6.05 \'97 Review form\
Goal: Submit reviews to gateway.\
\
End / Acceptance:\
Review appears in UI.\
\
\uc0\u55358 \u56809  Milestone 7 \'97 Integration Tests\
T7.01 \'97 Smoke tests for all services\
Goal: Create ci_cd/tests/*.sh verifying endpoints.\
\
End / Acceptance:\
bash ci_cd/tests/run_all.sh exits 0.\
\
T7.02 \'97 DB sanity-check script\
Goal: Verify tables contain test data.\
\
End / Acceptance:\
Counts printed for users, courses, enrollments, reviews.\
\
\uc0\u55358 \u56809  Milestone 8 \'97 Dockerization\
T8.01 \'97 Update Dockerfiles\
Goal: Valid Dockerfiles for all services.\
\
End / Acceptance:\
docker-compose up --build --no-start succeeds.\
\
T8.02 \'97 Bring up full stack\
Goal: All services respond /health.\
\
End / Acceptance:\
Ports: 5000\'965003, 3000 \uc0\u8594  200 OK.\
\
\uc0\u55358 \u56809  Milestone 9 \'97 Messaging (optional MVP+)\
T9.01 \'97 Publish enroll events to RabbitMQ\
Goal: Publish message on enrollment.\
\
End / Acceptance:\
Consumer prints event JSON.\
\
\uc0\u55358 \u56809  Milestone 10 \'97 CI/CD\
T10.01 \'97 Add GitHub Actions workflow\
Goal: Workflow runs tests automatically.\
\
End / Acceptance:\
ci_cd/github-actions.yml valid YAML, runs bash ci_cd/tests/run_all.sh.\
\
\uc0\u55358 \u56809  Milestone 11 \'97 Observability\
T11.01 \'97 Add Prometheus /metrics endpoint\
Goal: /metrics exposes counters.\
\
End / Acceptance:\
curl /metrics \uc0\u8594  up 1, service_requests_total.\
\
\uc0\u55358 \u56809  Miscellaneous Small Tasks\
TX.01 \'97 Add CORS to API Gateway\
Goal: Allow frontend origin for local dev.\
\
TX.02 \'97 Add .env.example\
Goal: List DB URLs, JWT_SECRET, ports.\
\
TX.03 \'97 Add docs/architecture.md\
Goal: Copy architecture overview into docs.\
\
\uc0\u9989  LLM Execution Instructions\
Execute one task at a time.\
\
After each, run test commands and output results.\
\
Stop if acceptance criteria fail \'97 fix before continuing.\
\
One commit per task, e.g.,\
git commit -m "T2.02 Implement /register endpoint"\
\
Environment assumptions\
Python 3.10+, Node 18+, Docker & docker-compose installed\
\
MySQL 8, Postgres 15\
\
curl, jq, and bash available}